task copyFilesToDockerBuildContextDir(type: Copy) {
    description = 'Copy files to a temporary folder to build the Docker image'
    from('Dockerfile')
    from('auditor-schema.json')
    from('ledger-schema.json')
    from('entrypoint.sh')
    from('database.properties.tmpl')
    into('build/docker')
}

task docker(type: Exec) {
    description = 'Build ScalarDL Schema Loader Docker image'
    dependsOn copyFilesToDockerBuildContextDir
    workingDir 'build/docker'
    commandLine 'docker', 'build', '--build-arg', "SCALARDB_VERSION=${scalarDbVersion}", '--tag', "ghcr.io/scalar-labs/scalardl-schema-loader:${dockerVersion}", '.'
}
